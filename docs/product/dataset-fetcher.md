# DatasetFetcher 产品设计文档

## 1. 概述

`DatasetFetcher` 是一个用于抓取图像数据的核心模块，支持多种数据源。其目标是为用户提供简单、统一的抓取体验。

## 2. 产品功能

1. **多数据源支持**: 支持 `waifuc` 和 `gallery-dl` 两种抓取方式。
2. **灵活性**: 用户可以通过标签、URL 等参数自定义抓取逻辑。
3. **输出管理**: 抓取结果可保存到指定目录，便于后续处理。

## 3. 信息结构

### 输入

| 字段名       | 类型          | 描述                                   |
|--------------|---------------|----------------------------------------|
| `source_type`| `str`         | 数据抓取方式，支持 `waifuc` 或 `gallery-dl`。 |
| `tags`       | `list[str]`   | 用于抓取的标签列表（适用于 `waifuc`）。 |
| `url`        | `str`         | 目标网站的 URL（适用于 `gallery-dl`）。 |
| `output_dir` | `str`         | 抓取结果保存的目录。                   |
| `quantity`   | `int`         | 要抓取的图像数量（适用于 `waifuc`）。   |

### 输出

抓取的图像文件保存到指定的 `output_dir` 目录。

## 4. 用户场景

1. **场景 1: 动漫图像抓取**  
   用户希望通过标签抓取特定角色或作品的图像。  
   - 输入: `source_type="waifuc"`, `tags=["character_name", "game_name"]`  
   - 输出: 图像文件保存到 `output_dir`。

2. **场景 2: 网站图像抓取**  
   用户希望从某个网站的图集抓取图像。  
   - 输入: `source_type="gallery-dl"`, `url="https://example.com/gallery"`  
   - 输出: 图像文件保存到 `output_dir`。

## 5. 未来扩展

1. **支持更多数据源**: 增加对其他抓取工具或 API 的支持。
2. **用户友好性**: 提供更直观的参数配置方式，例如通过 WebUI。
3. **性能优化**: 支持多线程抓取以提高效率。

## 6. 相关文档

- [waifuc 项目介绍](waifuc.md): 了解 `waifuc` 的详细信息。
